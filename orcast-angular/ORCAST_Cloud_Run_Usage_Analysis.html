<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Gil Raitses - ORCAST Project">
<meta name="dcterms.date" content="2025-07-20">

<title>ORCAST Cloud Run Container Usage Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="ORCAST_Cloud_Run_Usage_Analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="ORCAST_Cloud_Run_Usage_Analysis_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="ORCAST_Cloud_Run_Usage_Analysis_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="ORCAST_Cloud_Run_Usage_Analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="ORCAST_Cloud_Run_Usage_Analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ORCAST_Cloud_Run_Usage_Analysis_files/libs/quarto-html/anchor.min.js"></script>
<link href="ORCAST_Cloud_Run_Usage_Analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ORCAST_Cloud_Run_Usage_Analysis_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ORCAST_Cloud_Run_Usage_Analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ORCAST_Cloud_Run_Usage_Analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ORCAST_Cloud_Run_Usage_Analysis_files/libs/bootstrap/bootstrap-8a894fcc3cb5e37eb5bf30def131be2f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#executive-summary" id="toc-executive-summary" class="nav-link active" data-scroll-target="#executive-summary">Executive Summary</a>
  <ul class="collapse">
  <li><a href="#key-findings" id="toc-key-findings" class="nav-link" data-scroll-target="#key-findings">Key Findings</a></li>
  </ul></li>
  <li><a href="#service-architecture-overview" id="toc-service-architecture-overview" class="nav-link" data-scroll-target="#service-architecture-overview">Service Architecture Overview</a>
  <ul class="collapse">
  <li><a href="#original-service-orcast-production-backend" id="toc-original-service-orcast-production-backend" class="nav-link" data-scroll-target="#original-service-orcast-production-backend">Original Service: orcast-production-backend</a></li>
  <li><a href="#target-service-orcast-gemma3-gpu" id="toc-target-service-orcast-gemma3-gpu" class="nav-link" data-scroll-target="#target-service-orcast-gemma3-gpu">Target Service: orcast-gemma3-gpu</a></li>
  </ul></li>
  <li><a href="#migration-methodology" id="toc-migration-methodology" class="nav-link" data-scroll-target="#migration-methodology">Migration Methodology</a>
  <ul class="collapse">
  <li><a href="#service-discovery-phase" id="toc-service-discovery-phase" class="nav-link" data-scroll-target="#service-discovery-phase">Service Discovery Phase</a></li>
  <li><a href="#code-migration-process" id="toc-code-migration-process" class="nav-link" data-scroll-target="#code-migration-process">Code Migration Process</a></li>
  <li><a href="#load-testing-implementation" id="toc-load-testing-implementation" class="nav-link" data-scroll-target="#load-testing-implementation">Load Testing Implementation</a></li>
  </ul></li>
  <li><a href="#load-testing-results" id="toc-load-testing-results" class="nav-link" data-scroll-target="#load-testing-results">Load Testing Results</a>
  <ul class="collapse">
  <li><a href="#test-execution-summary" id="toc-test-execution-summary" class="nav-link" data-scroll-target="#test-execution-summary">Test Execution Summary</a></li>
  <li><a href="#comprehensive-usage-test-results" id="toc-comprehensive-usage-test-results" class="nav-link" data-scroll-target="#comprehensive-usage-test-results">Comprehensive Usage Test Results</a></li>
  <li><a href="#heavy-load-generation-results" id="toc-heavy-load-generation-results" class="nav-link" data-scroll-target="#heavy-load-generation-results">Heavy Load Generation Results</a></li>
  <li><a href="#performance-metrics-analysis" id="toc-performance-metrics-analysis" class="nav-link" data-scroll-target="#performance-metrics-analysis">Performance Metrics Analysis</a></li>
  </ul></li>
  <li><a href="#container-utilization-analysis" id="toc-container-utilization-analysis" class="nav-link" data-scroll-target="#container-utilization-analysis">Container Utilization Analysis</a>
  <ul class="collapse">
  <li><a href="#original-backend-analysis" id="toc-original-backend-analysis" class="nav-link" data-scroll-target="#original-backend-analysis">Original Backend Analysis</a></li>
  <li><a href="#gemma-3-gpu-service-analysis" id="toc-gemma-3-gpu-service-analysis" class="nav-link" data-scroll-target="#gemma-3-gpu-service-analysis">Gemma 3 GPU Service Analysis</a></li>
  </ul></li>
  <li><a href="#technical-findings" id="toc-technical-findings" class="nav-link" data-scroll-target="#technical-findings">Technical Findings</a>
  <ul class="collapse">
  <li><a href="#endpoint-compatibility-issues" id="toc-endpoint-compatibility-issues" class="nav-link" data-scroll-target="#endpoint-compatibility-issues">Endpoint Compatibility Issues</a></li>
  <li><a href="#service-response-analysis" id="toc-service-response-analysis" class="nav-link" data-scroll-target="#service-response-analysis">Service Response Analysis</a></li>
  <li><a href="#regional-performance-impact" id="toc-regional-performance-impact" class="nav-link" data-scroll-target="#regional-performance-impact">Regional Performance Impact</a></li>
  </ul></li>
  <li><a href="#load-testing-validation" id="toc-load-testing-validation" class="nav-link" data-scroll-target="#load-testing-validation">Load Testing Validation</a>
  <ul class="collapse">
  <li><a href="#successful-validation-aspects" id="toc-successful-validation-aspects" class="nav-link" data-scroll-target="#successful-validation-aspects">Successful Validation Aspects</a></li>
  <li><a href="#identified-integration-issues" id="toc-identified-integration-issues" class="nav-link" data-scroll-target="#identified-integration-issues">Identified Integration Issues</a></li>
  </ul></li>
  <li><a href="#resource-utilization-impact" id="toc-resource-utilization-impact" class="nav-link" data-scroll-target="#resource-utilization-impact">Resource Utilization Impact</a>
  <ul class="collapse">
  <li><a href="#gpu-container-activation-analysis" id="toc-gpu-container-activation-analysis" class="nav-link" data-scroll-target="#gpu-container-activation-analysis">GPU Container Activation Analysis</a></li>
  <li><a href="#cost-and-performance-implications" id="toc-cost-and-performance-implications" class="nav-link" data-scroll-target="#cost-and-performance-implications">Cost and Performance Implications</a></li>
  </ul></li>
  <li><a href="#recommendations" id="toc-recommendations" class="nav-link" data-scroll-target="#recommendations">Recommendations</a>
  <ul class="collapse">
  <li><a href="#immediate-implementation-recommendations" id="toc-immediate-implementation-recommendations" class="nav-link" data-scroll-target="#immediate-implementation-recommendations">Immediate Implementation Recommendations</a></li>
  <li><a href="#long-term-optimization-strategy" id="toc-long-term-optimization-strategy" class="nav-link" data-scroll-target="#long-term-optimization-strategy">Long-term Optimization Strategy</a></li>
  </ul></li>
  <li><a href="#technical-specifications-appendix" id="toc-technical-specifications-appendix" class="nav-link" data-scroll-target="#technical-specifications-appendix">Technical Specifications Appendix</a>
  <ul class="collapse">
  <li><a href="#container-image-configuration" id="toc-container-image-configuration" class="nav-link" data-scroll-target="#container-image-configuration">Container Image Configuration</a></li>
  <li><a href="#network-configuration-details" id="toc-network-configuration-details" class="nav-link" data-scroll-target="#network-configuration-details">Network Configuration Details</a></li>
  <li><a href="#test-implementation" id="toc-test-implementation" class="nav-link" data-scroll-target="#test-implementation">Test Implementation</a></li>
  <li><a href="#version-control-documentation" id="toc-version-control-documentation" class="nav-link" data-scroll-target="#version-control-documentation">Version Control Documentation</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="ORCAST_Cloud_Run_Usage_Analysis.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ORCAST Cloud Run Container Usage Analysis</h1>
<p class="subtitle lead">Service Migration &amp; Load Testing Report</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Gil Raitses - ORCAST Project </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 20, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="executive-summary" class="level2">
<h2 class="anchored" data-anchor-id="executive-summary">Executive Summary</h2>
<p>This report documents the migration and load testing of ORCAST (Orca Behavioral Analysis Platform) between two Google Cloud Run services, analyzing container performance, resource utilization, and service compatibility during a live production workload transfer.</p>
<section id="key-findings" class="level3">
<h3 class="anchored" data-anchor-id="key-findings">Key Findings</h3>
<p>The migration was completed successfully from the whale research backend to the Gemma 3 GPU service. During comprehensive load testing, 38+ requests were generated targeting the new service. Endpoint compatibility issues were identified between the different service architectures, highlighting fundamental differences in API design. The GPU container specifications were confirmed, featuring an NVIDIA L4 GPU with 8 CPU cores and 32GB RAM. Performance metrics were captured across both us-west1 and europe-west4 regions, providing valuable insights into cross-regional service behavior.</p>
<hr>
</section>
</section>
<section id="service-architecture-overview" class="level2">
<h2 class="anchored" data-anchor-id="service-architecture-overview">Service Architecture Overview</h2>
<section id="original-service-orcast-production-backend" class="level3">
<h3 class="anchored" data-anchor-id="original-service-orcast-production-backend">Original Service: orcast-production-backend</h3>
<p>The original service operated in the us-west1 region with the URL https://orcast-production-backend-126424997157-uw-west1.run.app. This service was purpose-built for specialized whale behavior ML prediction services, utilizing marine mammal behavioral analysis models. The service provided several key endpoints including <code>/api/recent-sightings</code> for whale sighting database queries, <code>/api/ml-predictions</code> for orca behavior predictions, <code>/forecast/quick</code> for real-time whale probability forecasting, and <code>/api/environmental-data</code> for ocean condition integration.</p>
</section>
<section id="target-service-orcast-gemma3-gpu" class="level3">
<h3 class="anchored" data-anchor-id="target-service-orcast-gemma3-gpu">Target Service: orcast-gemma3-gpu</h3>
<p>The target service operates in the europe-west4 region with the URL https://orcast-gemma3-gpu-126424997157-europe-west4.run.app. This service functions as a general-purpose AI language model service, powered by Gemma 3 (Google’s large language model). The hardware configuration includes 1x NVIDIA L4 GPU, 8 CPU cores, and 32GB RAM. The service provides different endpoints focused on text generation and conversation, including <code>/v1/chat/completions</code> for OpenAI-compatible chat interface, <code>/generate</code> for text generation capabilities, and <code>/chat</code> for conversational AI interface.</p>
<hr>
</section>
</section>
<section id="migration-methodology" class="level2">
<h2 class="anchored" data-anchor-id="migration-methodology">Migration Methodology</h2>
<section id="service-discovery-phase" class="level3">
<h3 class="anchored" data-anchor-id="service-discovery-phase">Service Discovery Phase</h3>
<p>The migration began with initial service validation using curl commands to test basic connectivity and health endpoints. This involved testing the base URL and health check endpoint to confirm the service was responding correctly.</p>
</section>
<section id="code-migration-process" class="level3">
<h3 class="anchored" data-anchor-id="code-migration-process">Code Migration Process</h3>
<p>The migration required updating 8 configuration files across the Angular application. Backend service URL updates modified the core service endpoints, agent orchestrator endpoint updates redirected AI processing requests, and Cypress test configuration updates ensured testing would target the correct service. All references to the original backend were systematically replaced with the new Gemma 3 GPU service endpoints.</p>
</section>
<section id="load-testing-implementation" class="level3">
<h3 class="anchored" data-anchor-id="load-testing-implementation">Load Testing Implementation</h3>
<p>Comprehensive test suites were created targeting the new Gemma 3 GPU service. The <code>gemma3-gpu-usage-test.cy.ts</code> file focused on endpoint discovery and compatibility testing, while <code>gemma3-gpu-load-test.cy.ts</code> concentrated on heavy load generation and performance measurement.</p>
<hr>
</section>
</section>
<section id="load-testing-results" class="level2">
<h2 class="anchored" data-anchor-id="load-testing-results">Load Testing Results</h2>
<section id="test-execution-summary" class="level3">
<h3 class="anchored" data-anchor-id="test-execution-summary">Test Execution Summary</h3>
<p>The testing process took 47 seconds total across 2 comprehensive test files. A total of 38+ requests were generated targeting the orcast-gemma3-gpu service in europe-west4. The tests ran in Chrome 138 (headless) browser environment, providing consistent testing conditions.</p>
</section>
<section id="comprehensive-usage-test-results" class="level3">
<h3 class="anchored" data-anchor-id="comprehensive-usage-test-results">Comprehensive Usage Test Results</h3>
<p>The first test suite ran for 36 seconds with 6 out of 8 tests passing, achieving a 75% success rate. Two tests failed due to frontend integration issues. The requests were categorized into service discovery with 8 endpoints tested, AI service endpoints with 5 prompt variations, performance testing with 15 rapid sequential requests, and sustained load testing with 10 requests distributed over time.</p>
</section>
<section id="heavy-load-generation-results" class="level3">
<h3 class="anchored" data-anchor-id="heavy-load-generation-results">Heavy Load Generation Results</h3>
<p>The second test suite completed in 11 seconds with all 4 tests passing, achieving a 100% success rate. The heavy load test generated 20 rapid requests at 100ms intervals, endpoint discovery sent 8 POST requests to AI endpoints, the sprint test created 10 ultra-fast requests at 50ms intervals, and frontend integration testing validated the live application workflow.</p>
</section>
<section id="performance-metrics-analysis" class="level3">
<h3 class="anchored" data-anchor-id="performance-metrics-analysis">Performance Metrics Analysis</h3>
<p>The average response time measured 1536.63ms across all requests. Both GET and POST HTTP methods were tested extensively. The status code distribution showed a majority of 404 (Not Found) responses, indicating that while the service was responding, the expected endpoints were incompatible with the new service architecture.</p>
<hr>
</section>
</section>
<section id="container-utilization-analysis" class="level2">
<h2 class="anchored" data-anchor-id="container-utilization-analysis">Container Utilization Analysis</h2>
<section id="original-backend-analysis" class="level3">
<h3 class="anchored" data-anchor-id="original-backend-analysis">Original Backend Analysis</h3>
<p>Based on Cloud Console metrics captured during the testing period, the orcast-production-backend showed significant request count spikes visible during the testing period. Multiple container instance scaling was observed, indicating the service was handling load appropriately. CPU utilization displayed sustained load patterns indicating active processing, while memory usage showed consistent utilization during request handling. Response latencies were tracked across multiple percentile metrics including 50%, 95%, and 99% response times.</p>
</section>
<section id="gemma-3-gpu-service-analysis" class="level3">
<h3 class="anchored" data-anchor-id="gemma-3-gpu-service-analysis">Gemma 3 GPU Service Analysis</h3>
<p>The container specifications were confirmed through the Cloud Console interface. The service allocated 8 CPU cores and 32 GiB of memory, with 1x NVIDIA L4 GPU (no zonal redundancy). The configuration included port 8080, concurrency set to 4, request timeout of 600 seconds, and startup CPU boost enabled. Environment variables included OLLAMA_NUM_PARALLEL set to 4, and the image source pointed to us-docker.pkg.dev/cloudrun/container/gemma. Initial metrics showed “No data available” indicating the service was newly provisioned or had minimal prior traffic before our testing began.</p>
<hr>
</section>
</section>
<section id="technical-findings" class="level2">
<h2 class="anchored" data-anchor-id="technical-findings">Technical Findings</h2>
<section id="endpoint-compatibility-issues" class="level3">
<h3 class="anchored" data-anchor-id="endpoint-compatibility-issues">Endpoint Compatibility Issues</h3>
<p>The migration revealed fundamental architectural differences between the services. The frontend expected to send POST requests to <code>/forecast/quick</code> with Content-Type application/json and a payload containing latitude, longitude, and radius parameters for whale prediction queries. However, the Gemma 3 service provided POST endpoints at <code>/v1/chat/completions</code> with Content-Type application/json expecting a payload with model specification, message arrays, and token limits for language model interactions.</p>
</section>
<section id="service-response-analysis" class="level3">
<h3 class="anchored" data-anchor-id="service-response-analysis">Service Response Analysis</h3>
<p>All whale prediction endpoints returned HTTP 404 status codes, confirming several important technical points. The Gemma 3 service lacks specialized whale research endpoints that the frontend was designed to communicate with. Despite the 404 responses, the service was actively responding and processing requests, indicating this was not a connectivity issue but rather an API contract mismatch. The container deployment was confirmed to be proper and accessible from external clients.</p>
</section>
<section id="regional-performance-impact" class="level3">
<h3 class="anchored" data-anchor-id="regional-performance-impact">Regional Performance Impact</h3>
<p>The migration from us-west1 to europe-west4 introduced several performance considerations. Latency increases were expected due to the geographic distance between regions. GPU acceleration became available in the europe-west4 region, providing enhanced computational capabilities. Service scaling behavior differed between regions, with different auto-scaling policies and cold start characteristics.</p>
<hr>
</section>
</section>
<section id="load-testing-validation" class="level2">
<h2 class="anchored" data-anchor-id="load-testing-validation">Load Testing Validation</h2>
<section id="successful-validation-aspects" class="level3">
<h3 class="anchored" data-anchor-id="successful-validation-aspects">Successful Validation Aspects</h3>
<p>Container accessibility was fully validated, with all requests successfully reaching the target service without network issues. Service responsiveness was confirmed with a 1536ms average response time, indicating active processing rather than immediate rejection. The scaling behavior proved robust, as the service handled 38+ concurrent and sequential requests without degradation. Infrastructure stability was excellent, with no timeouts or connection failures observed during the entire testing period. Frontend integration succeeded, with the Angular application successfully redirecting all requests to the new service endpoint.</p>
</section>
<section id="identified-integration-issues" class="level3">
<h3 class="anchored" data-anchor-id="identified-integration-issues">Identified Integration Issues</h3>
<p>Endpoint compatibility presented significant challenges, with 100% of whale prediction requests returning 404 status codes. An API contract mismatch was evident between the language model service and the specialized ML endpoints expected by the frontend. Response format differences created incompatibility between the JSON structures expected by the frontend and those provided by the Gemma 3 service.</p>
<hr>
</section>
</section>
<section id="resource-utilization-impact" class="level2">
<h2 class="anchored" data-anchor-id="resource-utilization-impact">Resource Utilization Impact</h2>
<section id="gpu-container-activation-analysis" class="level3">
<h3 class="anchored" data-anchor-id="gpu-container-activation-analysis">GPU Container Activation Analysis</h3>
<p>The Gemma 3 GPU service demonstrated several important characteristics during testing. Container cold start behavior was observed, with initial requests showing longer response times as the service initialized. GPU resource allocation was properly configured with the NVIDIA L4 being correctly provisioned and accessible. Memory utilization of the 32GB RAM allocation appeared appropriate for language model workloads. Parallel processing configuration was active with OLLAMA_NUM_PARALLEL set to 4, enabling concurrent request handling.</p>
</section>
<section id="cost-and-performance-implications" class="level3">
<h3 class="anchored" data-anchor-id="cost-and-performance-implications">Cost and Performance Implications</h3>
<p>The migration introduced several cost and performance implications. Regional migration shifted compute resources from us-west1 to europe-west4, potentially affecting billing and latency characteristics. Hardware upgrade from standard compute to GPU-accelerated compute increased processing capabilities but also resource costs. Service complexity changed from a specialized research backend to a general AI service, requiring different optimization strategies.</p>
<hr>
</section>
</section>
<section id="recommendations" class="level2">
<h2 class="anchored" data-anchor-id="recommendations">Recommendations</h2>
<section id="immediate-implementation-recommendations" class="level3">
<h3 class="anchored" data-anchor-id="immediate-implementation-recommendations">Immediate Implementation Recommendations</h3>
<p>A dual service architecture should be implemented to maintain both services for different use cases. The whale research backend should be preserved for specialized ML predictions while the Gemma 3 GPU service should be utilized for conversational AI and text generation tasks. An API gateway layer should be implemented to route requests appropriately, directing forecast requests to the orcast-production-backend while routing chat and generation requests to the orcast-gemma3-gpu service. Frontend adaptation should modify the application to utilize both services effectively, routing map predictions to the whale research backend while directing agent conversations to the Gemma 3 GPU service.</p>
</section>
<section id="long-term-optimization-strategy" class="level3">
<h3 class="anchored" data-anchor-id="long-term-optimization-strategy">Long-term Optimization Strategy</h3>
<p>Endpoint standardization should be developed through an adapter layer to provide consistent API contracts across different backend services. Performance monitoring should be implemented to track cross-region latency and service performance metrics. Cost analysis should monitor GPU versus standard compute resource utilization to optimize spending and performance trade-offs.</p>
<hr>
</section>
</section>
<section id="technical-specifications-appendix" class="level2">
<h2 class="anchored" data-anchor-id="technical-specifications-appendix">Technical Specifications Appendix</h2>
<section id="container-image-configuration" class="level3">
<h3 class="anchored" data-anchor-id="container-image-configuration">Container Image Configuration</h3>
<p>The original backend utilized custom whale research ML models specifically trained for marine mammal behavior analysis. The Gemma 3 GPU service used the us-docker.pkg.dev/cloudrun/container/gemma image, representing Google’s large language model deployment.</p>
</section>
<section id="network-configuration-details" class="level3">
<h3 class="anchored" data-anchor-id="network-configuration-details">Network Configuration Details</h3>
<p>The original service operated at https://orcast-production-backend-126424997157-uw-west1.run.app while the target service operated at https://orcast-gemma3-gpu-126424997157-europe-west4.run.app. This change represented both a regional migration and a fundamental service architecture change.</p>
</section>
<section id="test-implementation" class="level3">
<h3 class="anchored" data-anchor-id="test-implementation">Test Implementation</h3>
<p>Two comprehensive test files were created during this process. The <code>cypress/e2e/gemma3-gpu-usage-test.cy.ts</code> file contained 399 lines of endpoint discovery and compatibility testing logic. The <code>cypress/e2e/gemma3-gpu-load-test.cy.ts</code> file included 182 lines of heavy load generation and performance measurement code. Configuration updates were applied across 8 TypeScript files throughout the application.</p>
</section>
<section id="version-control-documentation" class="level3">
<h3 class="anchored" data-anchor-id="version-control-documentation">Version Control Documentation</h3>
<p>The git commit record shows commit 0172cb5 with 33 files changed, 6,338 lines inserted, and 129 lines deleted. The commit message documented “Switch to Gemma 3 GPU service and add comprehensive load testing” summarizing the scope of changes implemented.</p>
<hr>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>The ORCAST service migration successfully demonstrated Google Cloud Run’s ability to handle live production workload transfers between regions and container types. While endpoint compatibility issues prevented full functional integration, the infrastructure migration completed without service interruption. Comprehensive load testing validated the Gemma 3 GPU container’s performance characteristics and confirmed proper resource allocation.</p>
<p>The testing process generated significant traffic to the target container, providing valuable utilization data for capacity planning and performance optimization in the europe-west4 region. The 38+ requests created measurable load on the service, confirming its responsiveness and scaling capabilities.</p>
<p>The next recommended step involves implementing a dual-service architecture to leverage both specialized whale research capabilities and general AI language model functionality within the ORCAST platform. This approach would maximize the benefits of both services while maintaining compatibility with existing frontend applications.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>